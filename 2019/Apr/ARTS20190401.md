# ARTS 第 2 周

> 每周完成一个ARTS： 每周至少做一个 LeetCode 的算法题、阅读并点评至少一篇英文技术文章、学习至少一个技术技巧、分享一篇有观点和思考的技术文章。（也就是 Algorithm、Review、Tip、Share 简称 ARTS）

## Algorithm

第 2 周，判断给出的数是否是回文 [Palindrome Number](https://leetcode.com/problems/palindrome-number/)

* 解法一

    将数字每位存入一个数组，然后首位对应进行判断是否相等，不等直接返回 false，循环次数为数组长度的二分之一加一，这边直接全部比较了。

    ```
    func isPalindrome(x int) bool {
        if x < 0 {
            return false
        }

        v := []int{}
        for x > 0 {
            i := x % 10
            v = append(v, i)
            x /= 10
        }
        for a, b := 0, len(v)-1; a < len(v) && b >= 0; a, b = a+1, b-1 {
            if v[a] != v[b] {
                return false
            }
        }
        return true
    }
    ```

* 解法二

    解法一方式其实跟 string 方式一样了，题目指出不通过 string 方式。回文的意思就是正读反读结果一样，那么直接通过数字反转后比较是否和原数相等就行了。

    ```
    func isPalindrome(x int) bool {
        p, r, t := x, 0, 0

        for p > 0 {
            t = p % 10
            r = r*10 + t
            p = p / 10
        }
        if x == r {
            return true
        }
        return false
    }
    ```

## Review

最近在做一个 TCP/Socket 的通讯小东西，服务端每 10 秒发一次心跳，客户端收到直接反馈心跳，客户端如果 60 秒没收到心跳，进行断开重连。一开始的想法是通过 time.Ticker 实现，查看源码后没找到 Reset 的 api，那就自己实现一个，大体思路如下

https://medium.com/@arpith/resetting-a-ticker-in-go-63858a2c17ec

自己去封装一个 Ticker，Reset 的时候直接 New 一个 time.Ticker。

但最后的没有通过这种方式处理，直接通过 channel 多路选择 time.After 实现了。

## Tip

最近遇到一个问题，golang 查询数据库汉字结果为乱码，一开始以为直接转一下就行了，然后花了一两个小时转过来转过去，没成功，google 搜索后又试了半天没成功，于是自己直接通过 golang 汉字转换测试，最后才意识到可能是编码问题，golang 代码是 utf8 编码的，查看数据库编码为 gbk（没想到，这不是我干的），遇到这种问题要么数据库设置编码格式，要么直接代码中转。

## Share

准备照着 Ghost 用 Go 写一个 CMS，这周就没有分享了，等我想到再补上。
